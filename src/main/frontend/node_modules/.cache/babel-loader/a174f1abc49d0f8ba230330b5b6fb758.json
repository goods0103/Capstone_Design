{"ast":null,"code":"import _toConsumableArray from\"C:/Project/capstone/demo/src/main/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Project/capstone/demo/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"./detail.module.css\";import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{getProducts}from\"../../service/fetcher\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Detail=function Detail(_ref){var convertPrice=_ref.convertPrice,cart=_ref.cart,setCart=_ref.setCart;var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];// 상세페이지에서 물건 수량 조절\nvar handleQuantity=function handleQuantity(type){if(type===\"plus\"){setCount(count+1);}else{if(count===1)return;setCount(count-1);}};// 장바구니에 중복된 물건을 담을 때 사용\nvar setQuantity=function setQuantity(id,quantity){var found=cart.filter(function(el){return el.id===id;})[0];var idx=cart.indexOf(found);var cartItem={id:product.id,image:product.image,name:product.name,quantity:quantity,price:product.price,provider:product.provider};setCart([].concat(_toConsumableArray(cart.slice(0,idx)),[cartItem],_toConsumableArray(cart.slice(idx+1))));};var handleCart=function handleCart(){var cartItem={id:product.id,image:product.image,name:product.name,quantity:count,price:product.price,provider:product.provider};var found=cart.find(function(el){return el.id===cartItem.id;});if(found)setQuantity(cartItem.id,found.quantity+count);else setCart([].concat(_toConsumableArray(cart),[cartItem]));};useEffect(function(){getProducts().then(function(data){setProduct(data.data.products.find(function(product){return product.id===parseInt(id);}));});},[id,product.price]);return product&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"main\",{className:styles.main,children:[/*#__PURE__*/_jsx(\"section\",{className:styles.product,children:/*#__PURE__*/_jsx(\"div\",{className:styles.product_img,children:/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:\"product\"})})}),/*#__PURE__*/_jsxs(\"section\",{className:styles.product,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.product_info,children:[/*#__PURE__*/_jsx(\"p\",{className:styles.seller_store,children:product.provider}),/*#__PURE__*/_jsx(\"p\",{className:styles.product_name,children:product.name}),/*#__PURE__*/_jsxs(\"span\",{className:styles.price,children:[convertPrice(product.price+\"\"),/*#__PURE__*/_jsx(\"span\",{className:styles.unit,children:\"\\uC6D0\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.delivery,children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uD0DD\\uBC30\\uBC30\\uC1A1 / \\uBB34\\uB8CC\\uBC30\\uC1A1\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles.line}),/*#__PURE__*/_jsxs(\"div\",{className:styles.amount,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.minus,src:\"/images/icon-minus-line.svg\",alt:\"minus\",onClick:function onClick(){return handleQuantity(\"minus\");}}),/*#__PURE__*/_jsx(\"div\",{className:styles.count,children:/*#__PURE__*/_jsx(\"span\",{children:count})}),/*#__PURE__*/_jsx(\"img\",{className:styles.plus,src:\"/images/icon-plus-line.svg\",alt:\"plus\",onClick:function onClick(){return handleQuantity(\"plus\");}})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.line}),/*#__PURE__*/_jsxs(\"div\",{className:styles.sum,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:styles.sum_price,children:\"\\uCD1D \\uC0C1\\uD488 \\uAE08\\uC561\"})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.total_info,children:[/*#__PURE__*/_jsxs(\"span\",{className:styles.total,children:[\"\\uCD1D \\uC218\\uB7C9 \",/*#__PURE__*/_jsxs(\"span\",{className:styles.total_count,children:[count,\"\\uAC1C\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:styles.total_price,children:[convertPrice(product.price*count),/*#__PURE__*/_jsx(\"span\",{className:styles.total_unit,children:\"\\uC6D0\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.btn,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.btn_buy,children:\"\\uBC14\\uB85C \\uAD6C\\uB9E4\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.btn_cart,onClick:function onClick(){handleCart();},children:\"\\uC7A5\\uBC14\\uAD6C\\uB2C8\"})]})]})]})});};","map":{"version":3,"names":["styles","useEffect","useState","useParams","getProducts","Detail","convertPrice","cart","setCart","id","product","setProduct","count","setCount","handleQuantity","type","setQuantity","quantity","found","filter","el","idx","indexOf","cartItem","image","name","price","provider","slice","handleCart","find","then","data","products","parseInt","main","product_img","product_info","seller_store","product_name","unit","delivery","line","amount","minus","plus","sum","sum_price","total_info","total","total_count","total_price","total_unit","btn","btn_buy","btn_cart"],"sources":["C:/Project/capstone/demo/src/main/frontend/src/components/product_detail/detail.js"],"sourcesContent":["import styles from \"./detail.module.css\";\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { getProducts } from \"../../service/fetcher\";\n\nexport const Detail = ({ convertPrice, cart, setCart }) => {\n  const { id } = useParams();\n  const [product, setProduct] = useState({});\n  const [count, setCount] = useState(1);\n\n  // 상세페이지에서 물건 수량 조절\n  const handleQuantity = (type) => {\n    if (type === \"plus\") {\n      setCount(count + 1);\n    } else {\n      if (count === 1) return;\n      setCount(count - 1);\n    }\n  };\n\n  // 장바구니에 중복된 물건을 담을 때 사용\n  const setQuantity = (id, quantity) => {\n    const found = cart.filter((el) => el.id === id)[0];\n    const idx = cart.indexOf(found);\n    const cartItem = {\n      id: product.id,\n      image: product.image,\n      name: product.name,\n      quantity: quantity,\n      price: product.price,\n      provider: product.provider,\n    };\n    setCart([...cart.slice(0, idx), cartItem, ...cart.slice(idx + 1)]);\n  };\n\n  const handleCart = () => {\n    const cartItem = {\n      id: product.id,\n      image: product.image,\n      name: product.name,\n      quantity: count,\n      price: product.price,\n      provider: product.provider,\n    };\n    const found = cart.find((el) => el.id === cartItem.id);\n    if (found) setQuantity(cartItem.id, found.quantity + count);\n    else setCart([...cart, cartItem]);\n  };\n\n  useEffect(() => {\n    getProducts().then((data) => {\n      setProduct(\n        data.data.products.find((product) => product.id === parseInt(id))\n      );\n    });\n  }, [id, product.price]);\n\n  return (\n    product && (\n      <>\n        <main className={styles.main}>\n          <section className={styles.product}>\n            <div className={styles.product_img}>\n              <img src={product.image} alt=\"product\" />\n            </div>\n          </section>\n          <section className={styles.product}>\n            <div className={styles.product_info}>\n              <p className={styles.seller_store}>{product.provider}</p>\n              <p className={styles.product_name}>{product.name}</p>\n              <span className={styles.price}>\n                {convertPrice(product.price + \"\")}\n                <span className={styles.unit}>원</span>\n              </span>\n            </div>\n\n            <div className={styles.delivery}>\n              <p>택배배송 / 무료배송</p>\n            </div>\n\n            <div className={styles.line}></div>\n\n            <div className={styles.amount}>\n              <img\n                className={styles.minus}\n                src=\"/images/icon-minus-line.svg\"\n                alt=\"minus\"\n                onClick={() => handleQuantity(\"minus\")}\n              />\n\n              <div className={styles.count}>\n                <span>{count}</span>\n              </div>\n\n              <img\n                className={styles.plus}\n                src=\"/images/icon-plus-line.svg\"\n                alt=\"plus\"\n                onClick={() => handleQuantity(\"plus\")}\n              />\n            </div>\n\n            <div className={styles.line}></div>\n\n            <div className={styles.sum}>\n              <div>\n                <span className={styles.sum_price}>총 상품 금액</span>\n              </div>\n\n              <div className={styles.total_info}>\n                <span className={styles.total}>\n                  총 수량 <span className={styles.total_count}>{count}개</span>\n                </span>\n                <span className={styles.total_price}>\n                  {convertPrice(product.price * count)}\n                  <span className={styles.total_unit}>원</span>\n                </span>\n              </div>\n            </div>\n\n            <div className={styles.btn}>\n              <button className={styles.btn_buy}>바로 구매</button>\n              <button\n                className={styles.btn_cart}\n                onClick={() => {\n                  handleCart();\n                }}\n              >\n                장바구니\n              </button>\n            </div>\n          </section>\n        </main>\n      </>\n    )\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}