{"ast":null,"code":"import _toConsumableArray from\"C:/Project/capstone/demo/src/main/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Project/capstone/demo/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"./detail.module.css\";import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{getProducts}from\"../../service/fetcher\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Detail=function Detail(_ref){var convertPrice=_ref.convertPrice,cart=_ref.cart,setCart=_ref.setCart;var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];// 상세페이지에서 물건 수량 조절\nvar handleQuantity=function handleQuantity(type){if(type===\"plus\"){setCount(count+1);}else{if(count===1)return;setCount(count-1);}};// 장바구니에 중복된 물건을 담을 때 사용\nvar setQuantity=function setQuantity(id,quantity){var found=cart.filter(function(el){return el.id===id;})[0];var idx=cart.indexOf(found);var cartItem={id:product.id,image:product.image,name:product.name,quantity:quantity,price:product.price,provider:product.provider};setCart([].concat(_toConsumableArray(cart.slice(0,idx)),[cartItem],_toConsumableArray(cart.slice(idx+1))));};var handleCart=function handleCart(){var cartItem={id:product.id,image:product.image,name:product.name,quantity:count,price:product.price,provider:product.provider};var found=cart.find(function(el){return el.id===cartItem.id;});if(found)setQuantity(cartItem.id,found.quantity+count);else setCart([].concat(_toConsumableArray(cart),[cartItem]));};useEffect(function(){getProducts().then(function(data){setProduct(data.data.products.find(function(product){return product.id===parseInt(id);}));});},[id,product.price]);return product&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"main\",{className:styles.main,children:[/*#__PURE__*/_jsx(\"section\",{className:styles.product,children:/*#__PURE__*/_jsx(\"div\",{className:styles.product_img,children:/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:\"product\"})})}),/*#__PURE__*/_jsxs(\"section\",{className:styles.product,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.product_info,children:[/*#__PURE__*/_jsx(\"p\",{className:styles.seller_store,children:product.provider}),/*#__PURE__*/_jsx(\"p\",{className:styles.product_name,children:product.name}),/*#__PURE__*/_jsxs(\"span\",{className:styles.price,children:[convertPrice(product.price+\"\"),/*#__PURE__*/_jsx(\"span\",{className:styles.unit,children:\"\\uC6D0\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.delivery,children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uD0DD\\uBC30\\uBC30\\uC1A1 / \\uBB34\\uB8CC\\uBC30\\uC1A1\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles.line}),/*#__PURE__*/_jsxs(\"div\",{className:styles.amount,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.minus,src:\"/images/icon-minus-line.svg\",alt:\"minus\",onClick:function onClick(){return handleQuantity(\"minus\");}}),/*#__PURE__*/_jsx(\"div\",{className:styles.count,children:/*#__PURE__*/_jsx(\"span\",{children:count})}),/*#__PURE__*/_jsx(\"img\",{className:styles.plus,src:\"/images/icon-plus-line.svg\",alt:\"plus\",onClick:function onClick(){return handleQuantity(\"plus\");}})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.line}),/*#__PURE__*/_jsxs(\"div\",{className:styles.sum,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{className:styles.sum_price,children:\"\\uCD1D \\uC0C1\\uD488 \\uAE08\\uC561\"})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.total_info,children:[/*#__PURE__*/_jsxs(\"span\",{className:styles.total,children:[\"\\uCD1D \\uC218\\uB7C9 \",/*#__PURE__*/_jsxs(\"span\",{className:styles.total_count,children:[count,\"\\uAC1C\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:styles.total_price,children:[convertPrice(product.price*count),/*#__PURE__*/_jsx(\"span\",{className:styles.total_unit,children:\"\\uC6D0\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.btn,children:[/*#__PURE__*/_jsx(\"button\",{className:styles.btn_buy,children:\"\\uBC14\\uB85C \\uAD6C\\uB9E4\"}),/*#__PURE__*/_jsx(\"button\",{className:styles.btn_cart,onClick:function onClick(){handleCart();},children:\"\\uC7A5\\uBC14\\uAD6C\\uB2C8\"})]})]})]})});};","map":{"version":3,"names":["styles","useEffect","useState","useParams","getProducts","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Detail","_ref","convertPrice","cart","setCart","_useParams","id","_useState","_useState2","_slicedToArray","product","setProduct","_useState3","_useState4","count","setCount","handleQuantity","type","setQuantity","quantity","found","filter","el","idx","indexOf","cartItem","image","name","price","provider","concat","_toConsumableArray","slice","handleCart","find","then","data","products","parseInt","children","className","main","product_img","src","alt","product_info","seller_store","product_name","unit","delivery","line","amount","minus","onClick","plus","sum","sum_price","total_info","total","total_count","total_price","total_unit","btn","btn_buy","btn_cart"],"sources":["C:/Project/capstone/demo/src/main/frontend/src/components/product_detail/detail.js"],"sourcesContent":["import styles from \"./detail.module.css\";\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { getProducts } from \"../../service/fetcher\";\n\nexport const Detail = ({ convertPrice, cart, setCart }) => {\n  const { id } = useParams();\n  const [product, setProduct] = useState({});\n  const [count, setCount] = useState(1);\n\n  // 상세페이지에서 물건 수량 조절\n  const handleQuantity = (type) => {\n    if (type === \"plus\") {\n      setCount(count + 1);\n    } else {\n      if (count === 1) return;\n      setCount(count - 1);\n    }\n  };\n\n  // 장바구니에 중복된 물건을 담을 때 사용\n  const setQuantity = (id, quantity) => {\n    const found = cart.filter((el) => el.id === id)[0];\n    const idx = cart.indexOf(found);\n    const cartItem = {\n      id: product.id,\n      image: product.image,\n      name: product.name,\n      quantity: quantity,\n      price: product.price,\n      provider: product.provider,\n    };\n    setCart([...cart.slice(0, idx), cartItem, ...cart.slice(idx + 1)]);\n  };\n\n  const handleCart = () => {\n    const cartItem = {\n      id: product.id,\n      image: product.image,\n      name: product.name,\n      quantity: count,\n      price: product.price,\n      provider: product.provider,\n    };\n    const found = cart.find((el) => el.id === cartItem.id);\n    if (found) setQuantity(cartItem.id, found.quantity + count);\n    else setCart([...cart, cartItem]);\n  };\n\n  useEffect(() => {\n    getProducts().then((data) => {\n      setProduct(\n        data.data.products.find((product) => product.id === parseInt(id))\n      );\n    });\n  }, [id, product.price]);\n\n  return (\n    product && (\n      <>\n        <main className={styles.main}>\n          <section className={styles.product}>\n            <div className={styles.product_img}>\n              <img src={product.image} alt=\"product\" />\n            </div>\n          </section>\n          <section className={styles.product}>\n            <div className={styles.product_info}>\n              <p className={styles.seller_store}>{product.provider}</p>\n              <p className={styles.product_name}>{product.name}</p>\n              <span className={styles.price}>\n                {convertPrice(product.price + \"\")}\n                <span className={styles.unit}>원</span>\n              </span>\n            </div>\n\n            <div className={styles.delivery}>\n              <p>택배배송 / 무료배송</p>\n            </div>\n\n            <div className={styles.line}></div>\n\n            <div className={styles.amount}>\n              <img\n                className={styles.minus}\n                src=\"/images/icon-minus-line.svg\"\n                alt=\"minus\"\n                onClick={() => handleQuantity(\"minus\")}\n              />\n\n              <div className={styles.count}>\n                <span>{count}</span>\n              </div>\n\n              <img\n                className={styles.plus}\n                src=\"/images/icon-plus-line.svg\"\n                alt=\"plus\"\n                onClick={() => handleQuantity(\"plus\")}\n              />\n            </div>\n\n            <div className={styles.line}></div>\n\n            <div className={styles.sum}>\n              <div>\n                <span className={styles.sum_price}>총 상품 금액</span>\n              </div>\n\n              <div className={styles.total_info}>\n                <span className={styles.total}>\n                  총 수량 <span className={styles.total_count}>{count}개</span>\n                </span>\n                <span className={styles.total_price}>\n                  {convertPrice(product.price * count)}\n                  <span className={styles.total_unit}>원</span>\n                </span>\n              </div>\n            </div>\n\n            <div className={styles.btn}>\n              <button className={styles.btn_buy}>바로 구매</button>\n              <button\n                className={styles.btn_cart}\n                onClick={() => {\n                  handleCart();\n                }}\n              >\n                장바구니\n              </button>\n            </div>\n          </section>\n        </main>\n      </>\n    )\n  );\n};\n"],"mappings":"wQAAA,MAAO,CAAAA,MAAM,KAAM,qBAAqB,CACxC,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,WAAW,KAAQ,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEpD,MAAO,IAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAAC,IAAA,CAAwC,IAAlC,CAAAC,YAAY,CAAAD,IAAA,CAAZC,YAAY,CAAEC,IAAI,CAAAF,IAAA,CAAJE,IAAI,CAAEC,OAAO,CAAAH,IAAA,CAAPG,OAAO,CAClD,IAAAC,UAAA,CAAeb,SAAS,EAAE,CAAlBc,EAAE,CAAAD,UAAA,CAAFC,EAAE,CACV,IAAAC,SAAA,CAA8BhB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,UAAA,CAA0BrB,QAAQ,CAAC,CAAC,CAAC,CAAAsB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA9BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAEtB;AACA,GAAM,CAAAG,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIC,IAAI,CAAK,CAC/B,GAAIA,IAAI,GAAK,MAAM,CAAE,CACnBF,QAAQ,CAACD,KAAK,CAAG,CAAC,CAAC,CACrB,CAAC,IAAM,CACL,GAAIA,KAAK,GAAK,CAAC,CAAE,OACjBC,QAAQ,CAACD,KAAK,CAAG,CAAC,CAAC,CACrB,CACF,CAAC,CAED;AACA,GAAM,CAAAI,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIZ,EAAE,CAAEa,QAAQ,CAAK,CACpC,GAAM,CAAAC,KAAK,CAAGjB,IAAI,CAACkB,MAAM,CAAC,SAACC,EAAE,QAAK,CAAAA,EAAE,CAAChB,EAAE,GAAKA,EAAE,GAAC,CAAC,CAAC,CAAC,CAClD,GAAM,CAAAiB,GAAG,CAAGpB,IAAI,CAACqB,OAAO,CAACJ,KAAK,CAAC,CAC/B,GAAM,CAAAK,QAAQ,CAAG,CACfnB,EAAE,CAAEI,OAAO,CAACJ,EAAE,CACdoB,KAAK,CAAEhB,OAAO,CAACgB,KAAK,CACpBC,IAAI,CAAEjB,OAAO,CAACiB,IAAI,CAClBR,QAAQ,CAAEA,QAAQ,CAClBS,KAAK,CAAElB,OAAO,CAACkB,KAAK,CACpBC,QAAQ,CAAEnB,OAAO,CAACmB,QACpB,CAAC,CACDzB,OAAO,IAAA0B,MAAA,CAAAC,kBAAA,CAAK5B,IAAI,CAAC6B,KAAK,CAAC,CAAC,CAAET,GAAG,CAAC,GAAEE,QAAQ,EAAAM,kBAAA,CAAK5B,IAAI,CAAC6B,KAAK,CAACT,GAAG,CAAG,CAAC,CAAC,GAAE,CACpE,CAAC,CAED,GAAM,CAAAU,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACvB,GAAM,CAAAR,QAAQ,CAAG,CACfnB,EAAE,CAAEI,OAAO,CAACJ,EAAE,CACdoB,KAAK,CAAEhB,OAAO,CAACgB,KAAK,CACpBC,IAAI,CAAEjB,OAAO,CAACiB,IAAI,CAClBR,QAAQ,CAAEL,KAAK,CACfc,KAAK,CAAElB,OAAO,CAACkB,KAAK,CACpBC,QAAQ,CAAEnB,OAAO,CAACmB,QACpB,CAAC,CACD,GAAM,CAAAT,KAAK,CAAGjB,IAAI,CAAC+B,IAAI,CAAC,SAACZ,EAAE,QAAK,CAAAA,EAAE,CAAChB,EAAE,GAAKmB,QAAQ,CAACnB,EAAE,GAAC,CACtD,GAAIc,KAAK,CAAEF,WAAW,CAACO,QAAQ,CAACnB,EAAE,CAAEc,KAAK,CAACD,QAAQ,CAAGL,KAAK,CAAC,CAAC,IACvD,CAAAV,OAAO,IAAA0B,MAAA,CAAAC,kBAAA,CAAK5B,IAAI,GAAEsB,QAAQ,GAAE,CACnC,CAAC,CAEDnC,SAAS,CAAC,UAAM,CACdG,WAAW,EAAE,CAAC0C,IAAI,CAAC,SAACC,IAAI,CAAK,CAC3BzB,UAAU,CACRyB,IAAI,CAACA,IAAI,CAACC,QAAQ,CAACH,IAAI,CAAC,SAACxB,OAAO,QAAK,CAAAA,OAAO,CAACJ,EAAE,GAAKgC,QAAQ,CAAChC,EAAE,CAAC,GAAC,CAClE,CACH,CAAC,CAAC,CACJ,CAAC,CAAE,CAACA,EAAE,CAAEI,OAAO,CAACkB,KAAK,CAAC,CAAC,CAEvB,MACE,CAAAlB,OAAO,eACLf,IAAA,CAAAI,SAAA,EAAAwC,QAAA,cACE1C,KAAA,SAAM2C,SAAS,CAAEnD,MAAM,CAACoD,IAAK,CAAAF,QAAA,eAC3B5C,IAAA,YAAS6C,SAAS,CAAEnD,MAAM,CAACqB,OAAQ,CAAA6B,QAAA,cACjC5C,IAAA,QAAK6C,SAAS,CAAEnD,MAAM,CAACqD,WAAY,CAAAH,QAAA,cACjC5C,IAAA,QAAKgD,GAAG,CAAEjC,OAAO,CAACgB,KAAM,CAACkB,GAAG,CAAC,SAAS,EAAG,EACrC,EACE,cACV/C,KAAA,YAAS2C,SAAS,CAAEnD,MAAM,CAACqB,OAAQ,CAAA6B,QAAA,eACjC1C,KAAA,QAAK2C,SAAS,CAAEnD,MAAM,CAACwD,YAAa,CAAAN,QAAA,eAClC5C,IAAA,MAAG6C,SAAS,CAAEnD,MAAM,CAACyD,YAAa,CAAAP,QAAA,CAAE7B,OAAO,CAACmB,QAAQ,EAAK,cACzDlC,IAAA,MAAG6C,SAAS,CAAEnD,MAAM,CAAC0D,YAAa,CAAAR,QAAA,CAAE7B,OAAO,CAACiB,IAAI,EAAK,cACrD9B,KAAA,SAAM2C,SAAS,CAAEnD,MAAM,CAACuC,KAAM,CAAAW,QAAA,EAC3BrC,YAAY,CAACQ,OAAO,CAACkB,KAAK,CAAG,EAAE,CAAC,cACjCjC,IAAA,SAAM6C,SAAS,CAAEnD,MAAM,CAAC2D,IAAK,CAAAT,QAAA,CAAC,QAAC,EAAO,GACjC,GACH,cAEN5C,IAAA,QAAK6C,SAAS,CAAEnD,MAAM,CAAC4D,QAAS,CAAAV,QAAA,cAC9B5C,IAAA,MAAA4C,QAAA,CAAG,qDAAW,EAAI,EACd,cAEN5C,IAAA,QAAK6C,SAAS,CAAEnD,MAAM,CAAC6D,IAAK,EAAO,cAEnCrD,KAAA,QAAK2C,SAAS,CAAEnD,MAAM,CAAC8D,MAAO,CAAAZ,QAAA,eAC5B5C,IAAA,QACE6C,SAAS,CAAEnD,MAAM,CAAC+D,KAAM,CACxBT,GAAG,CAAC,6BAA6B,CACjCC,GAAG,CAAC,OAAO,CACXS,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAArC,cAAc,CAAC,OAAO,CAAC,EAAC,EACvC,cAEFrB,IAAA,QAAK6C,SAAS,CAAEnD,MAAM,CAACyB,KAAM,CAAAyB,QAAA,cAC3B5C,IAAA,SAAA4C,QAAA,CAAOzB,KAAK,EAAQ,EAChB,cAENnB,IAAA,QACE6C,SAAS,CAAEnD,MAAM,CAACiE,IAAK,CACvBX,GAAG,CAAC,4BAA4B,CAChCC,GAAG,CAAC,MAAM,CACVS,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAArC,cAAc,CAAC,MAAM,CAAC,EAAC,EACtC,GACE,cAENrB,IAAA,QAAK6C,SAAS,CAAEnD,MAAM,CAAC6D,IAAK,EAAO,cAEnCrD,KAAA,QAAK2C,SAAS,CAAEnD,MAAM,CAACkE,GAAI,CAAAhB,QAAA,eACzB5C,IAAA,QAAA4C,QAAA,cACE5C,IAAA,SAAM6C,SAAS,CAAEnD,MAAM,CAACmE,SAAU,CAAAjB,QAAA,CAAC,kCAAO,EAAO,EAC7C,cAEN1C,KAAA,QAAK2C,SAAS,CAAEnD,MAAM,CAACoE,UAAW,CAAAlB,QAAA,eAChC1C,KAAA,SAAM2C,SAAS,CAAEnD,MAAM,CAACqE,KAAM,CAAAnB,QAAA,EAAC,sBACxB,cAAA1C,KAAA,SAAM2C,SAAS,CAAEnD,MAAM,CAACsE,WAAY,CAAApB,QAAA,EAAEzB,KAAK,CAAC,QAAC,GAAO,GACpD,cACPjB,KAAA,SAAM2C,SAAS,CAAEnD,MAAM,CAACuE,WAAY,CAAArB,QAAA,EACjCrC,YAAY,CAACQ,OAAO,CAACkB,KAAK,CAAGd,KAAK,CAAC,cACpCnB,IAAA,SAAM6C,SAAS,CAAEnD,MAAM,CAACwE,UAAW,CAAAtB,QAAA,CAAC,QAAC,EAAO,GACvC,GACH,GACF,cAEN1C,KAAA,QAAK2C,SAAS,CAAEnD,MAAM,CAACyE,GAAI,CAAAvB,QAAA,eACzB5C,IAAA,WAAQ6C,SAAS,CAAEnD,MAAM,CAAC0E,OAAQ,CAAAxB,QAAA,CAAC,2BAAK,EAAS,cACjD5C,IAAA,WACE6C,SAAS,CAAEnD,MAAM,CAAC2E,QAAS,CAC3BX,OAAO,CAAE,SAAAA,QAAA,CAAM,CACbpB,UAAU,EAAE,CACd,CAAE,CAAAM,QAAA,CACH,0BAED,EAAS,GACL,GACE,GACL,EAEV,CAEL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}